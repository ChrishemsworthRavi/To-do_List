<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
        // Import Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDiUruGOyWTsNBDotzNp4j-obcDPbHybfs",
            authDomain: "to-do-list-8f1a0.firebaseapp.com",
            projectId: "to-do-list-8f1a0",
            storageBucket: "to-do-list-8f1a0.appspot.com",
            messagingSenderId: "949894671778",
            appId: "1:949894671778:web:1ecb5abd5dfe9f2d0196fb",
            measurementId: "G-WETGV5YTFC"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.addEventListener("DOMContentLoaded", loadTasks);

        async function addTask() {
            let taskInput = document.getElementById("taskInput");
            let taskText = taskInput.value.trim();
            if (taskText === "") return;

            // Add task to Firestore
            const docRef = await addDoc(collection(db, "tasks"), {
                text: taskText,
                completed: false
            });

            taskInput.value = "";
            loadTasks();
        }

        async function loadTasks() {
            let taskList = document.getElementById("taskList");
            taskList.innerHTML = "";
            
            const querySnapshot = await getDocs(collection(db, "tasks"));
            querySnapshot.forEach(doc => {
                let task = doc.data();
                let li = document.createElement("li");
                li.className = "flex justify-between items-center bg-gray-200 px-3 py-2 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105";
                li.innerHTML = `
                    <div class="flex items-center gap-2">
                        <input type="checkbox" ${task.completed ? 'checked' : ''} onclick="toggleComplete('${doc.id}', this)" class="task-checkbox">
                        <span class="task-text ${task.completed ? 'line-through text-gray-500 opacity-50' : ''}">${task.text}</span>
                    </div>
                    <button onclick="removeTask('${doc.id}')" class="bg-red-500 text-white px-2 py-1 rounded-lg hover:bg-red-600 transition-all duration-300">X</button>`;
                taskList.appendChild(li);
            });
        }

        async function removeTask(id) {
            await deleteDoc(doc(db, "tasks", id));
            loadTasks();
        }

        async function toggleComplete(id, checkbox) {
            let completed = checkbox.checked;
            await updateDoc(doc(db, "tasks", id), { completed: completed });
            loadTasks();
        }
    </script>
</head>
<body class="bg-gray-100 text-gray-900 transition-colors duration-300">
    <div class="max-w-md mx-auto mt-10 bg-white p-6 rounded-lg shadow-lg">
        <h2 class="text-3xl font-bold text-center mb-4 text-blue-600 animate-pulse">To-Do List</h2>
        <div class="flex gap-2">
            <input type="text" id="taskInput" placeholder="Add a new task" class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-all duration-300">
            <button onclick="addTask()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-transform transform hover:scale-105">Add</button>
        </div>
        <ul id="taskList" class="mt-4 space-y-2"></ul>
    </div>
</body>
</html>